/*
	This code contibuted by Triffid_Hunter and modified by Kliment
	why double up on these macros? see http://gcc.gnu.org/onlinedocs/cpp/Stringification.html
*/


#define _ARDUINO_H 

#include <avr/io.h>

/*
	utility functions
*/


/// MASKING- returns \f$2^PIN\f$
	#define MASK(PIN) (1 << PIN)


/*
	magic I/O routines

	now you can simply SET_OUTPUT(STEP); WRITE(STEP, 1); WRITE(STEP, 0);
*/

/// Read a pin
#define _READ(IO) ((bool)(##DIO##IO_RPORT & MASK(##DIO##IO_PIN)))
/// write to a pin
#define _WRITE(IO, v) do { if (v) {##DIO##IO_WPORT |= MASK(##DIO##IO_PIN); } else {##DIO##IO_WPORT &= ~MASK(##DIO##IO_PIN); }; } while (0)
/// toggle a pin
#define _TOGGLE(IO) do {##DIO##IO_RPORT = MASK(##DIO##IO_PIN); } while (0)

/// set pin as input
#define _SET_INPUT(IO) do {##DIO##IO_DDR &= ~MASK(##DIO##IO_PIN); } while (0)
/// set pin as output
#define _SET_OUTPUT(IO) do {##DIO##IO_DDR |= MASK(##DIO##IO_PIN); } while (0)

/// check if pin is an input
#define _GET_INPUT(IO) ((##DIO##IO_DDR & MASK(##DIO##IO_PIN)) == 0)
/// check if pin is an output
#define _GET_OUTPUT(IO) ((##DIO##IO_DDR & MASK(##DIO##IO_PIN)) != 0)

//	why double up on these macros? see http://gcc.gnu.org/onlinedocs/cpp/Stringification.html

/// Read a pin wrapper
#define READ(IO) _READ(IO)
/// Write to a pin wrapper
#define WRITE(IO, v) _WRITE(IO, v)
/// toggle a pin wrapper
#define TOGGLE(IO) _TOGGLE(IO)

/// set pin as input wrapper
#define SET_INPUT(IO) _SET_INPUT(IO)
/// set pin as output wrapper
#define SET_OUTPUT(IO) _SET_OUTPUT(IO)

/// check if pin is an input wrapper
#define GET_INPUT(IO) _GET_INPUT(IO)
/// check if pin is an output wrapper
#define GET_OUTPUT(IO) _GET_OUTPUT(IO)

/*
	ports and functions

	added as necessary or if I feel like it- not a comprehensive list!
*/



























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































